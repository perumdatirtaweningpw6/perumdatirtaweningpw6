
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Pengaduan - Dashboard</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- FontAwesome -->
  <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

  <!-- AOS Animation -->
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root { --brand:#4db8ff; --ink:#cfeaff; --panel: rgba(16, 40, 78, 0.85); --panel-soft: rgba(16, 40, 78, 0.65); }
    body { color: #fff; font-family: 'Segoe UI', sans-serif; min-height: 100vh; overflow-x: hidden; position: relative; }
    #bg-video { position: fixed; right: 0; bottom: 0; min-width: 100%; min-height: 100%; object-fit: cover; z-index: -1; filter: brightness(40%) blur(1px); }
    .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(11,31,59,0.55); z-index: 0; }
    .navbar { background: rgba(11, 31, 59, 0.7); box-shadow: 0 2px 10px rgba(0,0,0,0.4); backdrop-filter: blur(8px); z-index: 1; }
    .navbar-brand { display: flex; align-items: center; gap: 10px; font-weight: bold; color: var(--brand) !important; }
    .card { background-color: var(--panel); border: none; border-radius: 16px; color: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.3); }
    .card-header { background: var(--panel-soft); border-bottom: 1px solid rgba(255,255,255,0.08); color: var(--ink); }
    .kpi { display: flex; align-items: center; gap: 14px; }
    .kpi i { font-size: 1.8rem; color: var(--brand); }
    .kpi .value { font-size: 1.6rem; font-weight: 700; }
    .subtitle { color: var(--ink); }
    .btn-brand { background: var(--brand); color: #07263f; border: none; }
    #map { width: 100%; height: 340px; border-radius: 12px; }
    footer { text-align: center; padding: 20px 0; color: #aaa; font-size: 0.9rem; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 30px; z-index: 1; position: relative; }
    table tbody tr:hover { background: rgba(255,255,255,0.04); }
  </style>
</head>
<body>
<video autoplay muted loop playsinline id="bg-video">
    <source src="footage.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <nav class="navbar navbar-dark px-4">
    <a class="navbar-brand" href="index.html">
      <img src="https://perumdatirtawening.co.id/asset/image/logo-horizon-kecils.gif" height="45" alt="Logo">
    </a>
    <div class="ms-auto d-flex gap-2">
      <a class="btn btn-sm btn-outline-info" href="pengaduan.html">üè† Beranda Modul</a>
      <a class="btn btn-sm btn-outline-light" href="index.html">Portal Utama</a>
    </div>
  </nav>

  <div class="container py-4">
    <div class="text-center mb-4" data-aos="fade-down">
      <h2 class="fw-bold text-info">Dashboard Pengaduan</h2>
      <p class="subtitle">SUBDashboard Pengaduan</p>
    </div>

    <!-- KPI Row -->
    <div class="row g-3 mb-3">
      <div class="col-md-3" data-aos="fade-up">
        <div class="card p-3">
          <div class="kpi">
            <i class="fas fa-inbox"></i>
            <div>
              <div class="label">Aduan Masuk</div>
              <div class="value" id="kpi1">0</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
        <div class="card p-3">
          <div class="kpi">
            <i class="fas fa-list-check"></i>
            <div>
              <div class="label">Dalam Proses</div>
              <div class="value" id="kpi2">0</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
        <div class="card p-3">
          <div class="kpi">
            <i class="fas fa-person-digging"></i>
            <div>
              <div class="label">Petugas Aktif</div>
              <div class="value" id="kpi3">0</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
        <div class="card p-3">
          <div class="kpi">
            <i class="fas fa-check-double"></i>
            <div>
              <div class="label">Selesai Bulan Ini</div>
              <div class="value" id="kpi4">0</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts / Map / Table -->
    <div class="row g-3">
      <div class="col-lg-6" data-aos="fade-up">
        <div class="card p-3">
          <div class="card-header">Grafik Utama</div>
          <div class="card-body">
            <canvas id="chart1" height="140"></canvas>
          </div>
        </div>
      </div>
      <div class="col-lg-6" data-aos="fade-up" data-aos-delay="100">
        <div class="card p-3">
          <div class="card-header">Peta Titik</div>
          <div class="card-body">
            <div id="map"></div>
          </div>
        </div>
      </div>
      <div class="col-12" data-aos="fade-up" data-aos-delay="150">
        <div class="card p-3">
          <div class="card-header d-flex justify-content-between align-items-center">
            <span>Tabel Ringkasan</span>
            <button class="btn btn-sm btn-brand" onclick="exportCSV()">Ekspor CSV</button>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-sm table-dark align-middle">
                <thead>
                  <tr>
                    <th>#</th><th>Kolom 1</th><th>Kolom 2</th><th>Status</th><th>Update</th>
                  </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    ¬© 2025 PDAM Tirtawening. Dashboard.
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>
    AOS.init({duration:800, once:true});

    // Demo data generator to make the dashboard alive (replace with real data binding later)
    const ctx = document.getElementById('chart1');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Jan','Feb','Mar','Apr','Mei','Jun','Jul','Agu','Sep','Okt','Nov','Des'],
        datasets: [{
          label: 'Aduan per Bulan',
          data: [12,19,9,5,14,20,25,18,16,22,24,28],
          fill: true,
          tension: 0.35
        }]
      },
      options: {
        plugins: { legend: { labels: { color: '#cfeaff' } } },
        scales: {
          x: { ticks: { color: '#cfeaff' }, grid: { color: 'rgba(255,255,255,0.08)' } },
          y: { ticks: { color: '#cfeaff' }, grid: { color: 'rgba(255,255,255,0.08)' } }
        }
      }
    });

    // Leaflet map demo
    const map = L.map('map').setView([-6.9147, 107.6098], 11);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);
    const demoPoints = [
      {lat:-6.92, lng:107.62, label:'A'}, {lat:-6.93,lng:107.59,label:'B'},
      {lat:-6.90,lng:107.62,label:'C'}, {lat:-6.95,lng:107.60,label:'D'}
    ];
    demoPoints.forEach(p => L.marker([p.lat,p.lng]).addTo(map).bindPopup('Titik '+p.label));

    // Table demo
    const rows = [
      {id:1, c1:'Data A', c2:'Wilayah 1', status:'Aktif', upd:'2025-10-10'},
      {id:2, c1:'Data B', c2:'Wilayah 2', status:'Pending', upd:'2025-10-10'},
      {id:3, c1:'Data C', c2:'Wilayah 3', status:'Selesai', upd:'2025-10-09'},
      {id:4, c1:'Data D', c2:'Wilayah 4', status:'Proses', upd:'2025-10-09'}
    ];
    const tb = document.getElementById('tableBody');
    rows.forEach(r => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${r.id}</td><td>${r.c1}</td><td>${r.c2}</td><td>${r.status}</td><td>${r.upd}</td>`;
      tb.appendChild(tr);
    });

    // KPI demo
    const kpiVals = [128, 74, 18, 92];
    ['kpi1','kpi2','kpi3','kpi4'].forEach((id, i) => document.getElementById(id).textContent = kpiVals[i]);

    // Export CSV
    function exportCSV() {
      const header = ['ID','Kolom 1','Kolom 2','Status','Update'];
      const content = rows.map(r => [r.id, r.c1, r.c2, r.status, r.upd]);
      const csv = [header, ...content].map(e => e.join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.setAttribute('href', url);
      link.setAttribute('download', 'export.csv');
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  </script>
</body>
</html>
